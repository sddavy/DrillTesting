<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achievement 8 Drill Test</title>
    <style>
        #questions-btn {
            background-color: #001489; /* Blue color */
            color: white;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            margin: 10px 0;
        }

        #questions-btn:hover {
            background-color: #010f61; /* Darker blue on hover */
        }

        #blank-drill-btn {
            background-color: #001489; /* Blue color */
            color: white;
            padding: 10px 20px;
            margin: 10px 5px 20px 5px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
        }

        #blank-drill-btn:hover {
            background-color: #010f61; /* Darker blue on hover */
        }

        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }

        h1, h2, h3 {
            text-align: center;
        }

        label {
            font-weight: bold;
            display: block; /* Changed to block for vertical stacking */
            margin: 10px 0 5px; /* Added margin for spacing */
        }

        input[type="text"], input[type="date"] {
            width: 200px;
            padding: 5px;
            margin-bottom: 20px; /* Margin for spacing between fields */
        }

        .question {
            margin-bottom: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .qualifications {
            margin: 10px 0;
            font-style: italic;
        }

        .radio-group {
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }

        .radio-group label {
            margin-right: 20px;
            font-weight: normal;
        }

        .radio-group input[type="radio"] {
            margin-right: 5px;
        }

        button {
            padding: 10px 20px;
            margin: 10px 5px 20px 5px;
            font-size: 16px;
            cursor: pointer;
            color: white;
            border: none;
            border-radius: 5px;
        }

        /* Submit Button */
        #submit-btn {
            background-color: #001489; /* Blue color */
        }

        #submit-btn:hover {
            background-color: #010f61; /* Darker blue on hover */
        }

        /* Download Button */
        #download-btn {
            background-color: #001489; /* Blue color */
        }

        #download-btn:hover {
            background-color: #010f61; /* Darker blue on hover */
        }

        /* Home Button */
        .home-btn {
            background-color: #c72f2f; /* Red color */
        }

        .home-btn:hover {
            background-color: #8b1414; /* Darker red on hover */
        }

        .result-text {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-top: 20px;
        }

        .passed {
            color: green;
        }

        .not-passed {
            color: red;
        }

        hr {
            margin: 30px 0;
        }

        a {
            display: block;
            text-align: center;
            margin-top: 30px;
            text-decoration: none;
            color: #007BFF;
        }

        a:hover {
            text-decoration: underline;
        }
    </style>
    <!-- Include jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
    function downloadStaticPDF() {
        const pdfPath = './Ach8.pdf';  // Assuming the PDF is in the root folder
        const link = document.createElement('a');
        link.href = pdfPath;
        link.download = 'Ach8Blank.pdf';  // The file name when downloaded
        link.click();
    }
    function calculateResults() {
        const totalQuestions = 18; // Updated to the actual number of questions
        let correctAnswers = 0;
        let totalAnswered = 0;

        // Select all the question elements
        const questions = document.querySelectorAll('.question');

        // Loop through each question
        questions.forEach((question, index) => {
            // Get the correct and incorrect radio buttons for this question
            const correctRadio = question.querySelector(`input[name="q${index + 1}"][data-correct="true"]`);
            const selectedRadio = question.querySelector(`input[name="q${index + 1}"]:checked`);

            // If the user selected an answer, increase the totalAnswered count
            if (selectedRadio) {
                totalAnswered += 1;

                // If the correct answer is selected, increase the correctAnswers count
                if (correctRadio && correctRadio.checked) {
                    correctAnswers += 1;
                }
            }
        });

        // Check if all questions are answered
        if (totalAnswered !== totalQuestions) {
            alert(`You have answered ${totalAnswered} out of ${totalQuestions} questions. Please answer all questions.`);
            return;
        }

        // Calculate percentage of correct answers
        const percentage = (correctAnswers / totalQuestions) * 100;
        let resultMessage = '';
        let resultClass = '';

        // Determine pass/fail based on percentage
        if (percentage >= 78) {
            resultMessage = `Passed - Number Correct: ${correctAnswers}`;
            resultClass = 'passed';
        } else {
            resultMessage = `Failed - Number Correct: ${correctAnswers}`;
            resultClass = 'not-passed';
        }

        // Update the result text and class for displaying the result
        document.getElementById('total-correct').textContent = correctAnswers;
        document.getElementById('total-incorrect').textContent = totalQuestions - correctAnswers;
        const resultElement = document.getElementById('result');
        resultElement.textContent = resultMessage;
        resultElement.className = `result-text ${resultClass}`;

        // Scroll to the result area smoothly
        resultElement.scrollIntoView({ behavior: 'smooth' });
    }
    function generatePDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        const name = document.getElementById('name').value || 'N/A';
        const date = document.getElementById('date').value || 'N/A';
        const testedBy = document.getElementById('tested-by').value || 'N/A';
        const totalCorrect = document.getElementById('total-correct').textContent;
        const totalIncorrect = document.getElementById('total-incorrect').textContent;
        const result = document.getElementById('result').textContent;

        doc.setFontSize(18);
        doc.text('Achievement 8 Drill & Ceremonies Practical Test', 105, 20, { align: 'center' });

        doc.setFontSize(12);
        doc.text(`Name: ${name}`, 20, 30);
        doc.text(`Date: ${date}`, 20, 40);
        doc.text(`Tested by: ${testedBy}`, 20, 50);

        doc.text(`Total Correct: ${totalCorrect}`, 20, 60);
        doc.text(`Total Incorrect: ${totalIncorrect}`, 20, 70);
        doc.text(`Result: ${result}`, 20, 80);

        doc.setFontSize(14);
        doc.text('Questions and Answers:', 20, 90);

        doc.setFontSize(12);
        let currentY = 100;

        const questions = document.querySelectorAll('.question');
        questions.forEach((question, index) => {
            const questionLabel = question.querySelector('label').textContent;
            const correctChecked = question.querySelector(`input[name="q${index + 1}"][data-correct="true"]`).checked;
            const answer = correctChecked ? 'Correct' : 'Incorrect';

            if (currentY > 280) {
                doc.addPage();
                currentY = 20;
            }

            doc.text(`${questionLabel}: ${answer}`, 20, currentY);
            currentY += 10;
        });

        doc.save(`Achievement8DrillTest_${name}.pdf`);  // This was missing
    }
    </script>
</head>
<body>
    <h1>Achievement 8 Drill & Ceremonies Practical Test</h1>
    
    <!-- Personal Information -->
    <div style="text-align: center; margin-bottom: 30px;">
        <label for="name">Name:</label>
        <input type="text" id="name" required>
        
        <label for="date">Date:</label>
        <input type="date" id="date" required>
        
        <label for="tested-by">Tested by:</label>
        <input type="text" id="tested-by" required>
    </div>
    
    <div text-align: center;">
         <p>Topic: Squadron Drill</p>
         <p>Conditions:Conditions: At least two cadets who can competently command a flight in a squadron formation are needed to role play this scenario. A better option is to also include at least two element leaders plus the flight sergeant for each flight. Provide the cadet with a list of the commands shown below without the standards, (see Attachment 1) and allow the cadet to refer to them during the course of the test. Instruct the cadet to form the squadron in line and lead the squadron in drill, completing all commands in sequence. The squadron should consist of 2 flights. If possible, assign to the flight cadets who are proficient in basic drill who can serve as element leaders, or even use two full flights. First sergeant and flight sergeants may drill their units from the side (not a simulated Pass in Review).</p>
         <p>Passing Score: 76%. Must perform at least 13 out of the 17 commands satisfactorily</p>
         <p>Note: The flights’ ability to perform the commands is NOT relevant to this test, but the first sergeant cannot successfully march the squadron if the flight sergeants don’t know how to give supplementary commands. You may have to teach or review basic squadron drill with them prior to conducting this test. If the cadet being tested gives the command correctly, mark them satisfactory even if the flight sergeants don’t correctly give supplementary commands; or stop, review, and try again..</p>
        </div>
    
    <!-- Button linking to Ach8Questions.html -->
    <div style="text-align: center; margin-bottom: 20px;">
        <button id="questions-btn" onclick="window.location.href='Ach8Questions.html'">Questions</button>
    </div>
    
    <!-- Question 1 -->
    <div class="question">
        <label>FALL IN</label>
        <div class="qualifications">
            Not graded; used to form the squadron. Reporting is not necessary.
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q1" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q1" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 2 -->
    <div class="question">
        <label>AT EASE</label>
        <div class="qualifications">
            Gives combined command properly (no pause, no supplementary command)
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q2" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q2" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 3 -->
    <div class="question">
        <label>Squadron, ATTENTION</label>
        <div class="qualifications">
            Command is clear and snaps.<br>
            Pauses after preparatory command for flight sergeants to give supplementary command
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q3" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q3" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 4 -->
    <div class="question">
        <label>Right, FACE</label>
        <div class="qualifications">
            Command is clear and snaps.<br>
            Pauses after preparatory command for flight sergeants to give supplementary command
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q4" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q4" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 5 -->
    <div class="question">
        <label>Forward, MARCH</label>
        <div class="qualifications">
            Command is clear and snaps.<br>
            Pauses after preparatory command for flight sergeants to give supplementary command
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q5" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q5" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>
    
    <!-- Question 6 -->
    <div class="question">
        <label>Column Left, MARCH</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary commands<br>
            Preparatory: left foot Execution: left foot
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q6" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q6" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 7 -->
    <div class="question">
        <label>Forward, MARCH</label>
        <div class="qualifications">
            Waits for 2nd flight to complete column movement<br>
            Given on left foot<br>
            Pauses after preparatory command for flight sergeants to give supplementary command
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q7" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q7" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>
        
    <hr>
    <!-- Question 8 -->
    <div class="question">
        <label>Column Right, MARCH</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary commands<br>
            Preparatory: right foot Execution: right foot
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q8" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q8" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 9 -->
    <div class="question">
        <label>Forward, MARCH</label>
        <div class="qualifications">
            Waits for 2nd flight to complete column movement<br>
            Given on left foot<br>
            Pauses after preparatory command for flight sergeants to give supplementary command
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q9" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q9" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 10 -->
    <div class="question">
        <label>Right Flank, MARCH</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary command<br>
            Preparatory: right foot Execution: right foot
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q10" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q10" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 11 -->
    <div class="question">
        <label>Left Flank, MARCH</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary command<br>
            Preparatory: left foot Execution: left foot
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q11" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q11" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 12 -->
    <div class="question">
        <label>To the Rear, MARCH</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary command<br>
            Preparatory: right foot Execution: right foot
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q12" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q12" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 13 -->
    <div class="question">
        <label>To the Rear, MARCH</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary command<br>
            Preparatory: right foot Execution: right foot
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q13" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q13" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 14 -->
    <div class="question">
        <label>Eyes, RIGHT</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary command<br>
            Preparatory: right foot Execution: right foot
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q14" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q14" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

    <!-- Question 15 -->
    <div class="question">
        <label>Ready, FRONT</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary command<br>
            Preparatory: left foot Execution: left foot<br>
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q15" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q15" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

        <!-- Question 16 -->
    <div class="question">
        <label>Squadron, HALT</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary command
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q16" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q16" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

        <!-- Question 17 -->
    <div class="question">
        <label>Left, FACE</label>
        <div class="qualifications">
            Command is clear and snaps<br>
            Pauses after preparatory command for flight sergeants to give supplementary command
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q17" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q17" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>

            <!-- Question 18 -->
    <div class="question">
        <label>DISMISSED</label>
        <div class="qualifications">
            Gives combined command properly (no pause, no supplementary command)
        </div>
        <div class="radio-group">
            <label><input type="radio" name="q18" data-correct="false"> Unsatisfactory</label>
            <label><input type="radio" name="q18" data-correct="true"> Satisfactory</label>
        </div>
    </div>
    <hr>
    
    
<h3>Test Results</h3>
    <p>Total Correct: <span id="total-correct">0</span></p>
    <p>Total Incorrect: <span id="total-incorrect">0</span></p>

    <div id="result" class="result-text"></div>
    <button id="submit-btn" onclick="calculateResults()">Submit</button>
    <button id="download-btn" onclick="generatePDF()">Download PDF</button>
    <button id="blank-drill-btn" onclick="downloadStaticPDF()">Download Blank Drill Test</button>


    <div style="text-align: center; margin-top: 30px;">
        <button class="home-btn" onclick="confirmHomeNavigation()">Return to Home</button>
    </div>
    <script>
    function confirmHomeNavigation() {
        const confirmNavigation = confirm("You have unsaved work. Are you sure you want to return to the home page and lose your progress?");
        
        if (confirmNavigation) {
            window.location.href = 'index.html'; // Redirect to home if the user confirms
        }
    }
    </script>
</body>
</html>
